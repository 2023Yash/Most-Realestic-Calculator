<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Orbitron:wght@400..900&display=swap");
      
      * {
        box-sizing: border-box;
        color: white;
        min-height: 0;
        min-width: 0;
        padding: 0;
        margin: 0;
      }
      
      body {
        background-image: url("https://t4.ftcdn.net/jpg/02/28/68/07/360_F_228680721_gGbh5ylrMPMikdBIzWb8N1yGBLg8dmu9.jpg");
        align-items: center;
        background-repeat: no-repeat;
        justify-content: center;
        background-size: cover;
        flex-direction: column;
        display: flex;
        height: 100vh;
      }

      div {
        background-image: url("https://us.123rf.com/450wm/thawats/thawats1210/thawats121000092/15655323-texture-noire-en-plastique-ou-en-arri%C3%A8re-plan.jpg");
        box-shadow: rgb(23 37 51) 9px 11px 20px 0px;
        border: 10px outset rgb(99, 99, 99);
        background-repeat: repeat-y;
        display: inline-block;
        border-radius: 15px;
        padding: 15px;
      }

      table {
        border-collapse: collapse;
      }

      td {
        padding: 5px;
      }
      
      h3 {
        background: radial-gradient(rgba(255, 255, 255, 0.2), transparent);
        text-shadow: 2px 2px 2px rgb(255 255 255 / 60%);
        color: rgba(255, 255, 255, 0.7);
        font-family: sans-serif;
        font-weight: lighter;
        text-align: center;
      }

      .solar-panel {
        text-align: center;
      }

      .solar-panel span {
        background-image: url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSHYxd7PYUhZaE-rBKpRFjCFYtUE18GmJfnLg&s");
        box-shadow: inset rgb(0, 0, 0) 3px 2px 20px 0px;
        background-repeat: no-repeat;
        border: inset 3px black;
        background-size: cover;
        display: inline-block;
        height: 20px;
        width: 84px;
      }

      input {
        box-shadow: inset rgb(0, 0, 0) 3px 2px 20px 0px;
        border: 5px inset rgb(39, 54, 47);
        background-color: rgb(35, 72, 55);
        font-family: "Orbitron", sans-serif;
        font-optical-sizing: auto;
        padding-block: 10px;
        font-style: normal;
        font-size: 15px;
        color: gray;
        width: 100%;
      }

      button {
        box-shadow: inset rgb(47 47 47) 3px 2px 20px 0px;
        border: 5px outset rgb(122, 122, 122);
        background: rgb(82, 82, 82);
        transition: all 100ms;
        border-radius: 5px;
        font-weight: 900;
        font-size: large;
        cursor: pointer;
        height: 50px;
        width: 50px;
      }

      button:active {
        border-width: 3px;
      }

      td[colspan="2"] button {
        width: 100%;
      }

      button.s2-btn img {
        width: 50%;
      }

      .s-btn {
        text-shadow: 2px 2px 0px rgba(118, 118, 118, 0.56);
        box-shadow: inset rgb(196 124 1) 3px 3px 20px 0px;
        border: 5px outset rgb(255, 185, 56);
        background-color: rgb(255, 190, 78);
        color: black;
      }

      .s2-btn {
        box-shadow: inset rgb(84 84 84 / 47%) 3px 2px 20px 0px;
        text-shadow: 2px 2px 0px rgba(118, 118, 118, 0.56);
        background-color: rgb(233, 233, 233);
        border: 5px outset rgb(223, 223, 223);
        color: black;
      }
    </style>
  </head>

  <body>
    <div>
      <table>
        <tr>
          <td colspan="2">
            <h3>¢@$|0</h3>
          </td>
          <td colspan="2" class="solar-panel">
            <span></span>
          </td>
        </tr>
        <tr>
          <td colspan="4">
            <input type="text" disabled id="display" />
          </td>
        </tr>
        <tr>
          <td><button class="s2-btn" onclick="clearDisplay()">C</button></td>
          <td>
            <button class="s2-btn" onclick="toggleCalculator()">O/1</button>
          </td>
          <td><button class="s2-btn" onclick="toDisplay('.')">.</button></td>
          <td><button class="s-btn" onclick="toDisplay('+')">+</button></td>
        </tr>
        <tr>
          <td><button onclick="toDisplay(1)">1</button></td>
          <td><button onclick="toDisplay(2)">2</button></td>
          <td><button onclick="toDisplay(3)">3</button></td>
          <td><button class="s-btn" onclick="toDisplay('-')">-</button></td>
        </tr>
        <tr>
          <td><button onclick="toDisplay(4)">4</button></td>
          <td><button onclick="toDisplay(5)">5</button></td>
          <td><button onclick="toDisplay(6)">6</button></td>
          <td><button class="s-btn" onclick="toDisplay('×')">×</button></td>
        </tr>
        <tr>
          <td><button onclick="toDisplay(7)">7</button></td>
          <td><button onclick="toDisplay(8)">8</button></td>
          <td><button onclick="toDisplay(9)">9</button></td>
          <td><button class="s-btn" onclick="toDisplay('÷')">÷</button></td>
        </tr>
        <tr>
          <td colspan="2"><button onclick="toDisplay(0)">0</button></td>
          <td>
            <button class="s2-btn" onclick="cut()">
              <img src="pngegg.png"alt="delete">
            </button>
          </td>
          <td><button class="s-btn" onclick="calculate()">=</button></td>
        </tr>
      </table>
    </div>

    <script>
      const display = document.getElementById("display");
      const operators = ["+", "-", "×", "÷"];
      let isOn = false;

      document.addEventListener("keydown", handleKeyPress);

      function handleKeyPress(event) {
        const key = event.key;
        if (!isOn) return;

        if (!isNaN(key)) {
          toDisplay(key);
        } else if (operators.includes(key)) {
          toDisplay(key);
        } else if (key === " ") {
          toggleCalculator();
        } else if (key === "Enter") {
          calculate();
        } else if (key === "Backspace") {
          cut();
        } else if (key === "c") {
          clearDisplay();
        } else if (key === ".") {
          toDisplay(key);
        } else if (key === "/" || key === "*") {
          toDisplay(key === "/" ? "÷" : "×");
        }
      }

      function toDisplay(value) {
        if (!isOn) return;

        const currentValue = display.value;
        const lastChar = currentValue.slice(-1);

        if (operators.includes(value)) {
          if (operators.includes(lastChar) || currentValue === "") {
            return;
          }
        }

        if (
          value === "." &&
          (lastChar === "." ||
            currentValue
              .split(/[\+\-\×\÷]/)
              .pop()
              .includes("."))
        ) {
          return;
        }

        display.placeholder = "0";
        display.value += value;
      }

      function clearDisplay() {
        if (!isOn) return;

        display.value = "";
        display.placeholder = "0";
      }

      function cut() {
        if (!isOn) return;

        display.value = display.value.slice(0, -1);
      }

      function calculate() {
        if (!isOn) return;

        if (display.value !== "") {
          try {
            const result = eval(
              display.value.replace(/×/g, "*").replace(/÷/g, "/")
            );
            localStorage.setItem("calculations", `${localStorage.getItem("calculations")} ${display.value} = ${result}<br>`)
            display.placeholder = result;
            display.value = "";
          } catch (e) {
            display.placeholder = "Error";
            display.value = "";
          }
        }
      }

      function toggleCalculator() {
        isOn = !isOn;
        display.value = "";
        display.placeholder = isOn ? "0" : "";
        const buttons = document.querySelectorAll("button:not(.s2-btn)");
        buttons.forEach((button) => {
          button.disabled = !isOn;
        });
      }
    </script>
  </body>
</html>
